# Viper V16 RISE for GBA

## ご案内

このソフトはWindows版「Viper V16 RISE」をGBAへ移植したものです。ゲームデータは付属していない為、製品を持っている方のみ遊べます。

![README](README.png)

## 前準備

対応バージョンは以下の通りです。「SGS.DAT」ファイルを「gbfs\data」にコピーしてください。
```
・CDケース版（Win95）
・DVDケース版（Classic Edition）
・DLSite（ファイル容量　24.18MBと記載）　※将来変更の可能性あり 

未対応：インターナショナル版、PC98版
```

```
SGS.DAT
容量:  27568299
CRC32: AD9053C0
```

## インストール環境

以下の条件で「make.bat」を実行します。

- windows 10 x64（もしくは11）
- Python3とPillowのインストール。プロンプトのパスが通っていることを確認してください
- Microsoft Visual C++ Redistributable(Visual Studio 2015, 2017, 2019, and 2022) 64bit版のインストール

変換時間はi5+SSD環境で15分ほど。約28MBのROMが作られれば成功です。ちなみにコンバート中にエラーが発生しても止まりません。やり直したい場合はDOSプロンプト画面を閉じてください。

## お約束

- 「Viper V16 RISE」はソニアの著作物です
- このソフトに関する問い合わせをソニアにしないでください
- このソフトを使用して発生した問題など、当方は一切責任を負いません
- 利用は個人で使用する範囲に留めてください

## 謝辞

- 解析資料

[Notequalsoft](http://www.notequalsoft.com/)さんの資料を参考にさせて頂いています。GTSに続いて2回目の移植ということもあって見通しよく進めることができました。ありがとうございます。ソニア製SGSシステムを分解すると「画像ビュアー、レイヤー合成、タイミングシート、音声再生、アセンブリもどき」になると思っています。具体的には、絵を１枚表示する、何枚も重ねて表示できるようにする、表示を何フレームか指定できるようにする、座標指定をできるようにする、といった内容です。最後にセリフや音声を付けて、物語の分岐にアセンブリもどき言語を用意すれば完成です。仕組みがわかるってとても楽しいことですね。

- 音楽（ゲームボーイサウンド）

GTSに続いてHoshiさんに音楽耳コピ依頼をさせて頂きました。ご本人曰く、SFCハードだけどFCみたいなピコピコだったGTSに対して、V16は覚醒してやべーっ感じとのこと。13曲もありますからね・・・作業時間は３桁代に突入にしていたようです。令和の時代、GBA移植という~~アホなこと~~に毎度付き合ってくれて助かりました。個人的には場面31（K11）の温かみのある曲、場面27(K10)の再現度はすごいと思っています。別途[音楽ロム](https://github.com/akkera102/gbadev-ja-test/tree/main/129_viper_v16_rise_bgm_test)を用意していますのでよかったら聞いてみてください。

## 言い訳タイム（前回比）

画質は前回と変わらず単純リサイズ1/2のガビガビMode4です。

- GB音源のボリューム変更と、バトルスキップできる勝ち負け機能を付けました
- 縦スクロール操作中にもアニメーションできるようにしています
- 容量に余裕があったので、音声を10512Hzから16384Hzに変更しました
- 全ルートのプレイ時間は1時間程度です
- セーブの種類はSRAMです。FLASHはCUBIC STYLE製のみ対応しています
- 感想やバグなどありましたらご[一報](https://twitter.com/akkera102)ください

## スピーカー及びヘッドセットモード

GB音源のch3に働きかける機能です。お好みで使用してください。

- スピーカーモード

低音の最初の高音部分を強調します。実機スピーカーで低音が聞こえない問題を解決。低音ブーストならぬ低音の高音ブースト。

- ヘッドセットモード

基本、エミュや実機＋ヘッドセットで遊ぶ時のモード。

## フラグ

セレクトボタンにてフラグ変更可能です。フラグと場面の組み合わせによってはバグが発生する為、値を強制変更しています。

```
ＦＬＡＧ１
　　0:とにかく逃げる
　　1:様子を見る

　　書込み場面  5
　　　判定場面  6

ＦＬＡＧ２
　　0:２人いる
　　1:サキ捕まる
　　2:２人捕まる

　　書込み場面  8  9 15
　　　判定場面 16 22 28 29 31（16 28は戦闘後に判定）

場面22「サキ捕まる」　→　「２人いる」に変更
場面29「２人捕まる」　→　「２人いる」に変更
場面31「２人捕まる」　→　「２人いる」に変更
```

## バトルスキップ

バトル中のみ、スタートボタンにて勝ち負けスキップができます。

## 攻略情報

```
キ:キック、パ:パンチ

手下青　　キ，パ，パ，キ
手下緑　　パ，パ，キ，パ，キ
ＢＯＳＳ　キ，パ，パ，キ，パ，キ

通常or連続攻撃どちらでも可能です。
```

```
敵の行動パターンは０か１で表します。
個数は手下青４、手下緑５、ＢＯＳＳ６で各ターン１個づつ使用。

ターン　　１２３４５６７８９・・・
手下青　　０１１０
手下緑　　１１０１０
ＢＯＳＳ　０１１０１０

最大個数を超えた場合、最初からの繰り返しになります。
このパターン０、１は、以下の主人公の攻撃方法で好守が決定されます。

〇：主人公が攻撃する
×：敵が攻撃する

パターン０
　　　　　通常　連続
キック　　〇　　〇
パンチ　　×　　×
チョップ　〇　　×

パターン１
　　　　　通常　連続
キック　　×　　×
パンチ　　〇　　〇
チョップ　×　　〇

例）
手下青の２ターン目のパターンは１です。
パターン１により「通常パンチ、連続パンチ、連続チョップ」は
敵にダメージを与えます。それ以外は敵が攻撃します。

手下青の５ターン目のパターンは０です。
パターン０により「通常キック、連続キック、通常チョップ」
敵にダメージを与えます。それ以外は敵が攻撃します。
```
```
敵のダメージ
パターン０　２０
パターン１　１５


主人公のダメージ
　　　　　通常　連続
キック　　２０　４０
パンチ　　１５　３０
チョップ　１０　２０
```

## 未実装

- 場面39（オリジナル：164) の胸アニメ
- バトルの背景アニメ

## ライセンス

- 私の書いたGBAソースコード（CC0）
- AGSコンバータ関連のpythonコード、Cコード（GPL2）
- CULT-GBA and fixed Lorenzooone ver(MIT)
- libgba(LGPL2.0 dynamic link)
- crt0.s(MPL2.0)
- misaki TTF font(see misaki.txt)

## 動作環境

- mGBA 0.10.3
- GBA.emu(Android) Apr 30 2024
- EverDrive X5
- EZ-FLASH DE

## 開発環境

- windows10 pro 64bit
- devkitPro(gcc v14.2.0 devkitARM r65)
- VisualBoyAdvance 1.8.0-beta 3
- Python3.13.1 + pillow11.0.0
- MSYS2(gcc version 13.2.0)

## 簡単な履歴

2025/05/18 v0.01

- 完成しました
- ゲームボーイ音源全曲集を追加（PC98のOPNを耳コピ）
- 音楽のボリューム機能追加
- 場面ジャンプの増減値を修正
- 場面２８の背景乱れバグ修正（フラグ関連）
- ゲームオーバー後の口パクバグ修正
- SND, DMGレジスタ関連の処理修正（プチノイズ軽減）

2025/03/20 beta

- おためし版

